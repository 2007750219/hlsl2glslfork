
#line 6
struct v2f {
    highp vec4 pos;
    highp vec2 uv;
};
uniform sampler2D _CameraDepthTexture;
uniform sampler2D _MainTex;
uniform highp vec4 _MainTex_TexelSize;
uniform sampler2D _NeighbourMaxTex;
uniform sampler2D _NoiseTex;
uniform highp float _SoftZDistance;
uniform highp vec4 _TileBufferSize;
uniform highp vec4 _VelBufferSize;
uniform sampler2D _VelTex;
uniform highp vec4 _ZBufferParams;
highp float softDepthCompare( in highp float za, in highp float zb );
highp float cylinder( in highp vec2 x, in highp vec2 y, in highp vec2 v );
highp float cone( in highp vec2 x, in highp vec2 y, in highp vec2 v );
highp float Linear01Depth( in highp float z );
highp vec4 xlat_main( in v2f i );
#line 45
highp float softDepthCompare( in highp float za, in highp float zb ) {
    #line 47
    return clamp( (1.0 - ((za - zb) / _SoftZDistance)), 0.0, 1.0);
}
#line 40
highp float cylinder( in highp vec2 x, in highp vec2 y, in highp vec2 v ) {
    highp float lv;
    #line 42
    lv = length(v);
    return (1.0 - smoothstep( (0.95 * lv), (1.05 * lv), length((x - y))));
}
#line 36
highp float cone( in highp vec2 x, in highp vec2 y, in highp vec2 v ) {
    #line 38
    return clamp( (1.0 - (length((x - y)) / length(v))), 0.0, 1.0);
}
#line 2
highp float Linear01Depth( in highp float z ) {
    return (1.0 / ((_ZBufferParams.x * z) + _ZBufferParams.y));
}
#line 51
highp vec4 xlat_main( in v2f i ) {
    highp vec2 x;
    highp vec2 xf;
    highp vec2 x2;
    highp vec2 vn;
    highp vec4 cx;
    highp float zx;
    highp vec2 vx;
    highp ivec2 pixelCoord;
    highp float j;
    highp float weight = 1.0;
    highp vec4 sum;
    highp int centerSample = 6;
    highp int i_1 = 0;
    highp float contrib = 1.0;
    highp float t;
    highp vec2 y;
    highp vec2 yf;
    highp vec2 vy;
    highp float zy;
    highp float f;
    highp float b;
    highp float alphay;
    highp vec4 cy;
    x = i.uv;
    xf = x;
    #line 55
    x2 = ((xf * _VelBufferSize.xy) / (_TileBufferSize.xy * 8.0));
    vn = texture2D( _NeighbourMaxTex, x2).xy;
    cx = texture2D( _MainTex, x);
    zx = texture2D( _CameraDepthTexture, x).x;
    #line 59
    zx = (-Linear01Depth( zx));
    vx = texture2D( _VelTex, xf).xy;
    pixelCoord = ivec2((i.uv * _MainTex_TexelSize.zw));
    j = (texture2D( _NoiseTex, (i.uv * 4.0)).x * 0.25);
    #line 63
    sum = (cx * weight);
    for ( ; (i_1 < 13); (i_1++)) {
        #line 68
        if ((i_1 == centerSample)){
            contrib = 0.0;
        }
        t = mix( -1.0, 1.0, (((float(i_1) + j) + 1.0) / 14.0));
        y = (x + (vn * t));
        #line 72
        yf = y;
        vy = texture2D( _VelTex, vec4( yf, 0.0, 0.0).xy).xy;
        zy = texture2D( _CameraDepthTexture, vec4( y, 0.0, 0.0).xy).x;
        zy = (-Linear01Depth( zy));
        #line 76
        f = softDepthCompare( zx, zy);
        b = softDepthCompare( zy, zx);
        alphay = (((f * cone( y, x, vy)) + (b * cone( x, y, vx))) + ((cylinder( y, x, vy) * cylinder( x, y, vx)) * 2.0));
        cy = texture2D( _MainTex, vec4( y, 0.0, 0.0).xy);
        #line 80
        sum += ((cy * alphay) * contrib);
        weight += (alphay * contrib);
    }
    sum /= weight;
    #line 84
    return sum;
}
varying highp vec2 xlv_TEXCOORD0;
void main() {
    highp vec4 xl_retval;
    v2f xlt_i;
    xlt_i.pos = vec4(0.0);
    xlt_i.uv = vec2( xlv_TEXCOORD0);
    xl_retval = xlat_main( xlt_i);
    gl_FragData[0] = vec4( xl_retval);
}
